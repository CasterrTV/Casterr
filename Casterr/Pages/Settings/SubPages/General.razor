@page "/settings/general"

@using Casterr.Shared.UI
@using Casterr.SettingsLib;

@inject SettingsManager sm

<span class="pageTitle">General Settings</span>

<div class="settings">
    <div class="setting">
        <span class="title">Startup Page:</span>
        <DropDown Name="somethingDropDown" Items="@dropDownItems" Placeholder="@dropDownItems.First()" OnSelectedChanged=@UpdateSettings />
    </div>
    <div class="setting">
        <TextBox />
    </div>
    <div class="setting">
        <TickBox />
    </div>
</div>

@code {
    string[] dropDownItems = { "Recordings", "Uploads", "Settings", "Profile" };

    static void UpdateSettings(string name, string newValue)
    {
        Console.WriteLine($"the dropdown was changed. {name} {newValue}");

        SettingsManager sm = new SettingsManager();
        GeneralSettings gs = new GeneralSettings();
        //RecordingSettings rs = new RecordingSettings();
        sm.GetSettings(gs);

        gs.StartupPage = newValue;
    }
}