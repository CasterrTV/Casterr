@page "/settings/general"

@using Casterr.Shared.UI
@using Casterr.SettingsLib

@inject SettingsManager sm
@inject GeneralSettings gs

<span class="pageTitle">General Settings</span>

<div class="settings">
    <div class="setting">
        <span class="title">Startup Page:</span>
        <DropDown Name="startupPage" Items="@dropDownItems" Placeholder="@dropDownItems.First()" OnSelectedChanged=@UpdateSettings />
    </div>
</div>

@code {
    string[] dropDownItems = { "Recordings", "Uploads", "Settings", "Profile" };

    public void UpdateSettings(string name, string newValue)
    {
        switch (name)
        {
            case "startupPage":
                gs.StartupPage = newValue;
                break;
        }

        sm.UpdateSettingsFile(gs);

        Console.WriteLine($"now: {gs.StartupPage}");
    }
}